% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_detections.R
\name{get_detections}
\alias{get_detections}
\title{Get BirdWeather Detections}
\usage{
get_detections(
  from = NULL,
  to = NULL,
  station_ids = NULL,
  station_types = NULL,
  species_ids = NULL,
  species_names = NULL,
  continents = NULL,
  countries = NULL,
  confidence_gte = NULL,
  ne = NULL,
  sw = NULL,
  limit = NULL
)
}
\arguments{
\item{from}{Start datetime as a string in ISO8601 format
(e.g. "2025-01-01T00:00:00.000Z"). Defaults to 24 hours ago if NULL.}

\item{to}{End datetime as a string in ISO8601 format
(e.g. "2025-01-02T00:00:00.000Z"). Defaults to now if NULL.}

\item{station_ids}{Character vector of station IDs to filter on (optional)}

\item{station_types}{Character vector of station types to filter on (optional).
Known types include "puc" (BirdWeather PUC units), "birdnetpi"
(Raspberry Pi-based stations), and "app" (mobile app detections).}

\item{species_ids}{Character vector of species IDs to filter on (optional)}

\item{species_names}{Character vector of species common or scientific names
to filter on (optional). Will be resolved to IDs via find_species().
If a name matches multiple species, all matches are printed and the
user is prompted to rerun with a more specific name.}

\item{continents}{Character vector of continents to filter on (optional)}

\item{countries}{Character vector of countries to filter on (optional)}

\item{confidence_gte}{Minimum confidence threshold as a float (optional)}

\item{ne}{Named list with lat and lon defining the north-east corner of a
bounding box (optional). Must be used together with sw.
Example: list(lat = 42.0, lon = -85.0)}

\item{sw}{Named list with lat and lon defining the south-west corner of a
bounding box (optional). Must be used together with ne.
Example: list(lat = 36.0, lon = -96.0)}

\item{limit}{Maximum total number of detections to return (default: NULL,
returns all matching detections). Each page fetches 250 at a time.
Set to a specific number for exploratory pulls.}
}
\value{
A flat data.table where each row is one detection with columns:
id, timestamp, confidence, score,
species_id, common_name, scientific_name,
station_id, station_name, station_type, station_timezone,
station_country, station_continent, station_state, station_location,
station_lat, station_lon
}
\description{
Retrieves bird detections from the BirdWeather API with optional filters.
Handles pagination automatically up to the specified limit. Returns a fully
flat data.table with all nested fields (coords, species, station) expanded
into individual columns.
}
\examples{
\dontrun{
connect_birdweather()

# Get detections for a date range
dets <- get_detections(
  from  = "2025-01-01T00:00:00.000Z",
  to    = "2025-01-02T00:00:00.000Z",
  limit = 1000
)

# Filter by species name
dets <- get_detections(
  from          = "2025-01-01T00:00:00.000Z",
  to            = "2025-01-02T00:00:00.000Z",
  species_names = "Black-capped Chickadee",
  limit         = 1000
)

# Filter by continent with confidence threshold
dets <- get_detections(
  from           = "2025-01-01T00:00:00.000Z",
  to             = "2025-01-02T00:00:00.000Z",
  continents     = "North America",
  confidence_gte = 0.9,
  limit          = 1000
)

# Filter by bounding box (Missouri/Illinois/Kentucky region)
dets <- get_detections(
  from  = "2025-05-12T00:00:00.000Z",
  to    = "2025-05-18T00:00:00.000Z",
  ne    = list(lat = 42.0, lon = -85.0),
  sw    = list(lat = 36.0, lon = -96.0),
  limit = 10000
)
}
}
